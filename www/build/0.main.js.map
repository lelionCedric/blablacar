{"version":3,"sources":["../../src/pages/accueil/accueil.module.ts","../../src/pages/proposer/proposer.ts","../../src/pages/rechercher/rechercher.ts","../../src/pages/trajets/trajets.ts"],"names":[],"mappings":"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","file":"0.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AccueilPage } from './accueil';\r\nimport { RechercherPage } from '../rechercher/rechercher';\r\nimport { TrajetsPage } from '../trajets/trajets';\r\nimport { ProposerPage } from '../proposer/proposer';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AccueilPage,\r\n    RechercherPage,\r\n    ProposerPage,\r\n    TrajetsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(AccueilPage),\r\n  ]\r\n})\r\nexport class AccueilPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/accueil/accueil.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\n\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\nimport { AngularFireDatabase, FirebaseListObservable } from 'angularfire2/database';\r\n\r\nimport * as firebase from 'firebase/app';\r\n/**\r\n * Generated class for the ProposerPage page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-proposer',\r\n    templateUrl: 'proposer.html',\r\n})\r\nexport class ProposerPage {\r\n    voyage \r\n    userID\r\n    voyagesRes: FirebaseListObservable<any[]>;\r\n    filteredItems: Array<any>;\r\n    bdd : AngularFireDatabase;\r\n    user: Observable<firebase.User>;\r\n\r\nconstructor(public navCtrl: NavController, public navParams: NavParams, db: AngularFireDatabase, public afAuth: AngularFireAuth) {\r\n    this.bdd= db;\r\n    this.voyage={}\r\n    this.user = afAuth.authState\r\n    this.user.subscribe((us)=> {\r\n        this.userID = us.uid\r\n    })\r\n    \r\n}\r\n\r\nionViewDidLoad() {\r\n    console.log('ionViewDidLoad ProposerPage');\r\n}\r\nsubmitProposer(){\r\n    console.log(this.voyage)\r\n    this.voyagesRes = this.bdd.list('/trajets');\r\n    var objectVoyage = this.voyagesRes.push({\r\n        \"arrive\": this.voyage.villeArr,\r\n        \"chauffeur_UID\": this.userID,\r\n        \"datearrive\": this.voyage.dateVoy,\r\n        \"datedepart\": this.voyage.dateVoy,\r\n        \"depart\": this.voyage.villeDep,\r\n        \"nbplacerestante\": 4,\r\n        \"peages\": this.voyage.peage,\r\n        \"price\": parseInt(this.voyage.prix),\r\n        \"description\": this.voyage.desc,\r\n\r\n    });\r\n    objectVoyage.update({\"trajet_id\": objectVoyage.key});\r\n}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/proposer/proposer.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { AngularFireDatabase, FirebaseListObservable } from 'angularfire2/database';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\nimport * as firebase from 'firebase/app';\r\n/**\r\n * Generated class for the RechercherPage page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n@IonicPage()\r\n@Component({\r\n    selector: 'page-rechercher',\r\n    templateUrl: 'rechercher.html',\r\n})\r\nexport class RechercherPage {\r\n\r\n    voyage\r\n    userID\r\n    voyagesRes: FirebaseListObservable<any[]>;\r\n    filteredItems: Array<any>;\r\n    bdd : AngularFireDatabase;\r\n    user: Observable<firebase.User>;\r\n    reservationTrajet: FirebaseListObservable<any[]>;\r\n\r\n\r\nconstructor(public navCtrl: NavController, public navParams: NavParams, db: AngularFireDatabase, public afAuth: AngularFireAuth) {\r\n    this.user = afAuth.authState;\r\n    this.bdd= db;\r\n    this.user.subscribe((us)=> {\r\n        this.userID = us.uid\r\n    });\r\n    this.voyage={};\r\n    console.log(this.userID);\r\n    this.reservationTrajet = this.bdd.list('/users/'+this.userID+'/reservations');\r\n}\r\n\r\nionViewDidLoad() {\r\n    console.log('ionViewDidLoad RechercherPage');\r\n}\r\n\r\nsubmitRechercher(){\r\n    this.voyagesRes = this.bdd.list('/trajets');\r\n    this.voyagesRes.subscribe((voyageRes)=> {\r\n\r\n        this.filteredItems = [];\r\n        voyageRes.forEach(item => {\r\n            if( item.depart== this.voyage.villeDep) {\r\n                if( item.arrive == this.voyage.villeArr) {\r\n                    if(item.datedepart == this.voyage.dateVoy){\r\n                        this.filteredItems.push(item); \r\n                        console.log(item);\r\n                     }\r\n                }\r\n            } \r\n        })\r\n    });\r\n}\r\n\r\n\r\n    reserver(voyage: string){\r\n        var counter = 0;\r\n        this.reservationTrajet = this.bdd.list('/users/'+this.userID+'/reservations')\r\n        //console.log(this.userID);\r\n        console.log(voyage);\r\n        this.reservationTrajet.subscribe((reserves) =>{\r\n            reserves.forEach((reserve) => {\r\n                counter++;\r\n            })\r\n        });\r\n        this.reservationTrajet.update('trajet'+counter,{\r\n            \"idTrajetReserve\" : voyage\r\n        });\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/rechercher/rechercher.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { AngularFireDatabase, FirebaseListObservable} from 'angularfire2/database';\r\n\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\nimport { PopoverController } from 'ionic-angular';\r\nimport { PopoverPage } from './my-pop-over';\r\n\r\n@IonicPage( )\r\n@Component({\r\n    selector: 'page-trajets',\r\n    templateUrl: 'trajets.html',\r\n})\r\nexport class TrajetsPage {\r\n\r\n\r\n    voyagesRes: FirebaseListObservable<any[]>;\r\n    filteredItems: Array<any>;\r\n\r\n    reservationItems: Array<any>;\r\n    voyagesReservation: FirebaseListObservable<any[]>;\r\n\r\n    userID\r\n    user\r\n    photoURL\r\n\r\n    constructor(public navCtrl: NavController, public navParams: NavParams, db: AngularFireDatabase, public popoverCtrl: PopoverController, public afAuth: AngularFireAuth) {\r\n        this.user = afAuth.authState\r\n        this.user.subscribe((us) => {\r\n            this.userID = us.uid;\r\n            console.log(us.uid);\r\n            this.photoURL = us.photoURL;\r\n\r\n            this.voyagesRes = db.list('/trajets');\r\n            this.voyagesRes.subscribe((resultat) => {\r\n                this.filteredItems = [];\r\n                resultat.forEach(item => {\r\n                    if (item.chauffeur_UID == this.userID) {\r\n                        this.filteredItems.push(item);\r\n                    }\r\n                })\r\n\r\n            })\r\n            this.loadReservation(db, us.uid)\r\n        })\r\n\r\n\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n        console.log('ionViewDidLoad ProposerPage');\r\n    }\r\n\r\n    deleteItem(key: string) {\r\n        this.voyagesRes.remove(key);\r\n    }\r\n\r\n    update(item) {\r\n        let popover = this.popoverCtrl.create(PopoverPage, item, {});\r\n        popover.present();\r\n    }\r\n\r\n    loadReservation(db: AngularFireDatabase, uid: string) {\r\n        this.voyagesReservation = db.list('/users/' + uid + '/reservations');\r\n        //  this.voyagesReservation.subscribe(() => {});;\r\n        console.log('/users/' + uid + '/reservations');\r\n        this.reservationItems = [];\r\n        this.voyagesReservation.subscribe((reservations) => {\r\n            reservations.forEach((item) => {\r\n                this.voyagesRes.subscribe((voyages) => {\r\n                    voyages.forEach((voyage) => {\r\n                        if (voyage.trajet_id == item.idTrajetReserve) {\r\n                            this.reservationItems.push(voyage);\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    annuler(voyage) {\r\n\r\n        var reservation\r\n\r\n        this.voyagesReservation.subscribe((reservations) => {\r\n            reservations.forEach( (item) =>{\r\n                if(item.idTrajetReserve == voyage.trajet_id) {\r\n                    console.log(item)\r\n                    reservation = item\r\n                }\r\n            })\r\n        })\r\n        this.voyagesReservation.remove(reservation.$key)\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/trajets/trajets.ts"],"sourceRoot":""}