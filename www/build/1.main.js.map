{"version":3,"sources":["../../src/pages/trajets/trajets.module.ts","webpack:///./src/pages/trajets/trajets.ts?c244"],"names":[],"mappings":"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","file":"1.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TrajetsPage } from './trajets';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    TrajetsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(TrajetsPage),\r\n  ],\r\n  exports: [\r\n    TrajetsPage\r\n  ]\r\n})\r\nexport class TrajetPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/trajets/trajets.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { AngularFireDatabase, FirebaseListObservable} from 'angularfire2/database';\r\n\r\nimport { AngularFireAuth } from 'angularfire2/auth';\r\nimport { PopoverController } from 'ionic-angular';\r\nimport { PopoverPage } from './my-pop-over';\r\n\r\n@IonicPage( )\r\n@Component({\r\n    selector: 'page-trajets',\r\n    templateUrl: 'trajets.html',\r\n})\r\nexport class TrajetsPage {\r\n\r\n\r\n    voyagesRes: FirebaseListObservable<any[]>;\r\n    filteredItems: Array<any>;\r\n\r\n    reservationItems: Array<any>;\r\n    voyagesReservation: FirebaseListObservable<any[]>;\r\n\r\n    userID\r\n    user\r\n    photoURL\r\n\r\n    constructor(public navCtrl: NavController, public navParams: NavParams, db: AngularFireDatabase, public popoverCtrl: PopoverController, public afAuth: AngularFireAuth) {\r\n        this.user = afAuth.authState\r\n        this.user.subscribe((us) => {\r\n            this.userID = us.uid;\r\n            console.log(us.uid);\r\n            this.photoURL = us.photoURL;\r\n\r\n            this.voyagesRes = db.list('/trajets');\r\n            this.voyagesRes.subscribe((resultat) => {\r\n                this.filteredItems = [];\r\n                resultat.forEach(item => {\r\n                    if (item.chauffeur_UID == this.userID) {\r\n                        this.filteredItems.push(item);\r\n                    }\r\n                })\r\n\r\n            })\r\n            this.loadReservation(db, us.uid)\r\n        })\r\n\r\n\r\n    }\r\n\r\n    ionViewDidLoad() {\r\n        console.log('ionViewDidLoad ProposerPage');\r\n    }\r\n\r\n    deleteItem(key: string) {\r\n        this.voyagesRes.remove(key);\r\n    }\r\n\r\n    update(item) {\r\n        let popover = this.popoverCtrl.create(PopoverPage, item, {});\r\n        popover.present();\r\n    }\r\n\r\n    loadReservation(db: AngularFireDatabase, uid: string) {\r\n        this.voyagesReservation = db.list('/users/' + uid + '/reservations');\r\n        //  this.voyagesReservation.subscribe(() => {});;\r\n        console.log('/users/' + uid + '/reservations');\r\n        this.reservationItems = [];\r\n        this.voyagesReservation.subscribe((reservations) => {\r\n            reservations.forEach((item) => {\r\n                this.voyagesRes.subscribe((voyages) => {\r\n                    voyages.forEach((voyage) => {\r\n                        if (voyage.trajet_id == item.idTrajetReserve) {\r\n                            this.reservationItems.push(voyage);\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    annuler(voyage) {\r\n\r\n        var reservation\r\n\r\n        this.voyagesReservation.subscribe((reservations) => {\r\n            reservations.forEach( (item) =>{\r\n                if(item.idTrajetReserve == voyage.trajet_id) {\r\n                    console.log(item)\r\n                    reservation = item\r\n                }\r\n            })\r\n        })\r\n        this.voyagesReservation.remove(reservation.$key)\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/trajets/trajets.ts"],"sourceRoot":""}